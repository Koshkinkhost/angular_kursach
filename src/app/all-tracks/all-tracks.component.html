<div class="tracks-container">
  <div class="select-container">
    <select [(ngModel)]="mode" (ngModelChange)="onModeChange($event)">
      <option value="tracks">–¢—Ä–µ–∫–∏</option>
      <option value="albums">–ê–ª—å–±–æ–º—ã</option>
    </select>
  </div>
  
  
  <div class="search-container">
    <input type="text" [formControl]="searchControl" placeholder="üîé –ü–æ–∏—Å–∫ ..." class="search-input">
    <button type="button" (click)="find_tracksByTitle()" class="search-button">–ü–æ–∏—Å–∫</button>
    <button type="button" style="background-color: blue;" (click)="reset()" class="search-button">–°–±—Ä–æ—Å</button>
  </div>
@if(mode=='tracks'){


  <div class="tracks-container">
    @for (t of tracks; track $index) {
      <div class="track-card">
        <div class="track-cover">
          <img alt="–û–±–ª–æ–∂–∫–∞ —Ç—Ä–µ–∫–∞" src="rack_logo.png">
        </div>
        <div class="track-info">

          <!-- –ï—Å–ª–∏ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é -->
          @if (!t.isEditing) {
            <h3 class="track-title">{{ t.title }}</h3>
            <p class="track-artist">üë§{{ t.trackArtist }}</p>
            <p class="track-genre">üéµ{{ t.genreTrack }}</p>
            <audio controls (play)="onPlay(t)">
              @if (t.audioUrl) {
                <source controls (play)="onPlay(t)" 
                [src]="this.base_url + t.audioUrl "
                type="audio/mp3">
              } @else {
                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
              }
            </audio>
        
            <h3 class="track-plays">‚èØÔ∏è {{ t.listenersCount }}</h3>

          }

          <!-- –ï—Å–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–ø—É—Ç—ã -->
          @if (t.isEditing) {
            <input type="text" [(ngModel)]="t.title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞" class="input-field">
            <input type="text" [(ngModel)]="t.trackArtist" placeholder="–ê—Ä—Ç–∏—Å—Ç" class="input-field">
            <select [(ngModel)]="t.genreTrack" class="input-field">
              @for( g of genres;track $index){
                <option  >{{ g }}</option>

              }
            </select>
            
          
            <button (click)="saveTrack(t)" class="input-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button (click)="cancelEdit(t)" class="input-button">–û—Ç–º–µ–Ω–∞</button>
          }

        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω) -->
        @if (this.IsAdmin && !t.isEditing) {
          <button (click)="editTrack(t)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        }
      </div>
    }
  </div>
}
@if(mode=='albums'){
  @for (album of albums; track $index) {
    <div class="album-card">
      <div class="album-cover">
        <img alt="–û–±–ª–æ–∂–∫–∞ –∞–ª—å–±–æ–º–∞" src="album_logo.png">
      </div>
      <div class="album-info">
        <h3 class="album-title">{{ album.title }}</h3>
        <p class="album-artist">üë§{{ album.artistName }}</p>
        <p class="album-genre">üéµ{{ album.genre }}</p>
        <p class="album-publisher">üìö {{ album.totalPlays }}</p>
        <a [routerLink]="['/album_tracks', album.albumId] " >–°–º–æ—Ç—Ä–µ—Ç—å</a>      </div>
    </div>
    
  }
  

}
</div>
